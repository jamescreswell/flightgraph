{% extends 'flights/base.html' %}

{% load static %}
{% load humanize %}


{% block links %}<link rel="stylesheet" type="text/css" href="{% static 'flights/css/flights.css' %}" />{% endblock %}


{% block content %}

<div id="comparison">
    <h2>Summary</h2>
    
    <table class="compare-table">
        <tr>
            <th>Username</th>
            <th>{{username1}}</th>
            <th>{{username2}}</th>
        </tr>
        <tr>
            <td>Total flights</td>
            <td>{{n_flights1}}</td>
            <td>{{n_flights2}}</td>
        </tr>
        <tr>
            <td>Total distance</td>
            <td>{{distance_mi1|floatformat:0|intcomma}} mi<br>{{distance_km1|floatformat:0|intcomma}} km</td>
            <td>{{distance_mi2|floatformat:0|intcomma}} mi<br>{{distance_km2|floatformat:0|intcomma}} km</td>
        </tr>
        <tr>
            <td>Unique airports</td>
            <td>{{top_airports1|length}}</td>
            <td>{{top_airports2|length}}</td>
        </tr>
    </table>
    
    
    <h2>Airports</h2>
    
    <table class="compare-table">
        <tr>
            <th colspan="3">Airports visited by {{username1}} and {{username2}}</th>
        </tr>
    </table>
    
    <table class="compare-table">
        <tr>
            <th colspan="3">Airports visited only by {{username1}}</th>
        </tr>
    </table>
    
    <table class="compare-table">
        <tr>
            <th colspan="3">Airports visited only by {{username2}}</th>
        </tr>
    </table>
    
    
    <h2>Aircraft</h2>
    
    <table class="compare-table">
        <tr>
            <th colspan="3">Aircraft flown by {{username1}} and {{username2}}</th>
        </tr>
        {% for plane in planes_both %}
        <tr>
            <td>{{plane.aircraft}}</td>
            {% if plane.count1 >= plane.count2 %}
            <td class='winner'>{{plane.count1}}</td>
            {% else %}
            <td>{{plane.count1}}</td>
            {% endif %}
            {% if plane.count1 <= plane.count2 %}
            <td class="winner">{{plane.count2}}</td>
            {% else %}
            <td>{{plane.count2}}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
    
    <table class="compare-table">
        <tr>
            <th colspan="3">Aircraft flown only by {{username1}}</th>
        </tr>
        {% for plane in planes_only1 %}
        <tr>
            <td>{{plane.aircraft}}</td>
            <td class='winner'>{{plane.count1}}</td>
            <td>0</td>
        </tr>
        {% endfor %}
    </table>
    
    <table class="compare-table">
        <tr>
            <th colspan="3">Aircraft flown only by {{username2}}</th>
        </tr>
        {% for plane in planes_only2 %}
        <tr>
            <td>{{plane.aircraft}}</td>
            <td>0</td>
            <td class='winner'>{{plane.count2}}</td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}